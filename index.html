
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dandelion Diagram</title>
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
    <div>
        <svg class = "canvas">
        </svg>
    </div>
    <script type="text/javascript">
        var svg_width = 1665, svg_height = 990;
        var bg_url = 'background.png', data_url = 'https://raw.githubusercontent.com/itscaroline/dd/main/RangeTimeCriticalIncidents.xlsx%20-%20Sheet1.csv';
        var dataset;
        var x_bound = 13700, y_bound = 8150;

        var svg = d3.select('svg').attr('width', svg_width)
                .attr('height', svg_height);

        svg.append('svg:image').attr('xlink:href', bg_url)
                .attr('x', 0).attr('y', 0);

        console.log(Array(10));
        var convertColor = function(id) {
            console.log(id);
            switch(id) {
                case '26679':
                    return 'magenta';
                case '26675':
                    return 'blue';
                case '28166':
                    return 'green';
                case '26656':
                    return 'red';
                case '28266':
                    //console.log(2);
                    return 'grey';
                case '28274':
                    return 'yellow';
                case '26689':
                    return;
                default:
                    console.log(id);
                    return 'orange';
            }
        }

        d3.csv(data_url, function(data) {
            dataset = data.filter(function(x) {
                return x.tracker !== '28266';
            });
            //console.log(dataset);
            var xScale = d3.scaleLinear().domain([0, x_bound]).range([0, svg_width]),
                yScale = d3.scaleLinear().domain([0, y_bound]).range([0, svg_height]);

            svg.selectAll("circle")
                .data(dataset)
                .enter()
                .append("circle")
                .attr("cx", function(datum, i){
                    var xcoord = xScale(+datum.x);
                    if (xcoord < 0 || xcoord > svg_width) {
                        //console.log(i);
                    }
                    return xcoord;
                })
                .attr("cy", function(datum, i) {
                    //console.log(yScale(datum.y));
                    var ycoord = yScale(+datum.y);
                    if (ycoord < 0 || ycoord > svg_height) {
                        // console.log(i);
                        // console.log(+datum.y);
                    }
                    return ycoord;
                })
                .attr("r", 1.25)
                .style("fill", function(datum) {
                    //console.log(datum.tracker);
                    return convertColor(datum.tracker);
                });
        });
        
            // var line = function(datum) {
            //     return d3.line()
            //         .x(function(datum) { return xScale(+datum.x);})
            //         .y(function(datum) { return yScale(+datum.y)}); 
            // }
            //         d3.line()
   
            //         });
            // svg.append("path").attr("d", function(d));


    </script>
</body>
</html>